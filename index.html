<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0,
maximum-scale=1.0, user-scalable=no">

<title>커튼 계산기</title>

<style>
html{font-size:16px}
*{box-sizing:border-box}

body{
  margin:0;
  padding:14px;
  background:#f4f4f7;
  font-family:-apple-system,BlinkMacSystemFont,Apple SD Gothic Neo,sans-serif;
}

h1{text-align:center;font-size:1.5rem}

.calculator{
  background:#fff;
  border-radius:16px;
  padding:16px;
  margin-bottom:18px;
  box-shadow:0 4px 10px rgba(0,0,0,.1)
}

input,select,button{
  width:100%;
  padding:14px;
  margin-top:10px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
  -webkit-text-size-adjust:100%;
}

button{
  background:#4f46e5;
  color:#fff;
  font-weight:800;
  border:none;
}

.item{
  background:#fafafa;
  border:1px solid #ddd;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}

.item button{background:#ef4444}

#grandTotal{
  position:sticky;
  bottom:10px;
  background:#fff;
  padding:16px;
  font-size:1.3rem;
  font-weight:900;
  border-radius:16px;
}
</style>
</head>

<body>
<h1>커튼 계산기</h1>

<div class="calculator">
<h3>속지 커튼</h3>
<input id="w" type="number" placeholder="가로(mm)">
<input id="p" type="number" placeholder="야드당 가격">
<button onclick="addSheer()">추가</button>
<div id="list"></div>
</div>

<div id="grandTotal">전체: 0원</div>
<button onclick="resetAll()" style="background:#ef4444;margin-top:12px">
전체 삭제
</button>

<script>
const KEY="CURTAIN_CALC";
const LIMIT=600000;
let items=[];

function money(n){return n.toLocaleString()+"원"}

function save(){
  localStorage.setItem(KEY,JSON.stringify({
    time:Date.now(),
    items
  }));
}

function load(){
  const d=JSON.parse(localStorage.getItem(KEY));
  if(!d) return;
  if(Date.now()-d.time>LIMIT){ resetAll(); return; }
  items=d.items;
  render();
}

function render(){
  list.innerHTML="";
  let total=0;
  items.forEach((it,i)=>{
    total+=it.value;
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`
      ${it.text} / ${money(it.value)}
      <button onclick="removeItem(${i})">삭제</button>
    `;
    list.appendChild(div);
  });
  grandTotal.innerText="전체: "+money(total);
  save();
}

function addSheer(){
  const width=+w.value;
  const price=+p.value;
  if(!width||!price) return;

  const yard=((width+200)*2)/900;
  const install=width>4800?90000:80000;

  items.push({
    text:`속지 ${yard.toFixed(2)}야드`,
    value:Math.round(yard*price+install)
  });
  render();
}

function removeItem(i){
  items.splice(i,1);
  render();
}

function resetAll(){
  items=[];
  localStorage.removeItem(KEY);
  render();
}

load();
</script>
</body>
</html>

