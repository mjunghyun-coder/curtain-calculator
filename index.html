<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>ì»¤íŠ¼Â·ë¸”ë¼ì¸ë“œ ê²¬ì  ê³„ì‚°ê¸°</title>

<style>
body{
  font-family: Apple SD Gothic Neo, sans-serif;
  background:#f4f4f7;
  padding:14px;
  margin:0;
  color:#222;
  font-size:18px;
}

h1{text-align:center;margin:20px 0;font-size:22px}

.calculator{
  background:#fff;
  border-radius:16px;
  padding:18px;
  margin-bottom:24px;
  box-shadow:0 4px 10px rgba(0,0,0,.1)
}

input,select{
  width:100%;
  padding:14px;
  margin-top:8px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:18px;   /* ğŸ”¥ í™•ëŒ€ ë°©ì§€ í•µì‹¬ */
}

button{
  width:100%;
  margin-top:14px;
  background:#4f46e5;
  color:#fff;
  padding:14px;
  border-radius:12px;
  border:none;
  font-size:18px;
}

.item{
  background:#fff;
  border:1px solid #ddd;
  padding:12px;
  border-radius:10px;
  margin-top:10px
}

.item button{
  background:#ef4444;
  margin-top:8px
}

.total{
  text-align:right;
  font-weight:800;
  margin-top:8px
}

#grandTotal{
  position:sticky;
  bottom:10px;
  background:#fff;
  padding:18px;
  font-size:22px;
  font-weight:900;
  border-radius:16px
}

#resetAll{
  background:#ef4444;
  font-weight:900
}
</style>
</head>

<body>
<h1>ì»¤íŠ¼Â·ë¸”ë¼ì¸ë“œ ê²¬ì  ê³„ì‚°ê¸°</h1>

<!-- 1 ì†ì§€ -->
<div class="calculator">
<h3>1. ì†ì§€ ì»¤íŠ¼</h3>
<input id="w1" type="number" placeholder="ê°€ë¡œ(mm)">
<input id="p1" type="number" placeholder="ì•¼ë“œë‹¹ ê°€ê²©">
<button onclick="addSheer()">ì¶”ê°€</button>
<div id="l1"></div>
<div class="total" id="t1">0ì›</div>
</div>

<!-- 2 ì•”ë§‰ -->
<div class="calculator">
<h3>2. ì•”ë§‰ ì»¤íŠ¼</h3>
<input id="w2" type="number" placeholder="ê°€ë¡œ(mm)">
<input id="p2" type="number" placeholder="í­ë‹¹ ê°€ê²©">
<button onclick="addBlack()">ì¶”ê°€</button>
<div id="l2"></div>
<div class="total" id="t2">0ì›</div>
</div>

<!-- 3 ë‚˜ë¹„ -->
<div class="calculator">
<h3>3. ë‚˜ë¹„ì£¼ë¦„ ì»¤íŠ¼</h3>
<input id="w3" type="number" placeholder="ê°€ë¡œ(mm)">
<select id="b3">
  <option value="casa">ê¹Œì‚¬ê³µì¥</option>
  <option value="neo">ë„¤ì˜¤í…ìŠ¤</option>
</select>
<input id="p3" type="number" placeholder="í­ë‹¹ ê°€ê²©">
<button onclick="addWave()">ì¶”ê°€</button>
<div id="l3"></div>
<div class="total" id="t3">0ì›</div>
</div>

<div id="grandTotal">ì „ì²´: 0ì›</div>
<button id="resetAll" onclick="resetAll()">ì „ì²´ ì‚­ì œ</button>

<script>
let sum=[0,0,0,0];
const LIMIT = 600000;

function money(n){
  return Math.round(n).toLocaleString()+"ì›";
}

function save(){
  localStorage.setItem("calcData", JSON.stringify({
    sum,
    lists:{
      l1:l1.innerHTML,
      l2:l2.innerHTML,
      l3:l3.innerHTML
    },
    time:Date.now()
  }));
}

function load(){
  const d = JSON.parse(localStorage.getItem("calcData"));
  if(!d) return;
  if(Date.now()-d.time>LIMIT){ localStorage.clear(); return; }

  sum=d.sum;
  l1.innerHTML=d.lists.l1;
  l2.innerHTML=d.lists.l2;
  l3.innerHTML=d.lists.l3;

  t1.innerText=money(sum[1]);
  t2.innerText=money(sum[2]);
  t3.innerText=money(sum[3]);
  updateTotal();
}

function updateTotal(){
  document.getElementById("grandTotal").innerText =
    "ì „ì²´: "+money(sum.reduce((a,b)=>a+b,0));
  save();
}

function add(i, txt, val){
  val=Math.round(val);
  const d=document.createElement("div");
  d.className="item";
  d.innerHTML=`${txt} / ${money(val)}
  <button onclick="this.parentElement.remove();sum[${i}]-=${val};updateTotal()">ì‚­ì œ</button>`;
  document.getElementById("l"+i).appendChild(d);
  sum[i]+=val;
  document.getElementById("t"+i).innerText=money(sum[i]);
  updateTotal();
}

function addSheer(){
 let w=+w1.value,p=+p1.value;
 let yard=((w+200)*2)/900;
 let install=w>4800?90000:80000;
 add(1,`ì†ì§€ ${yard.toFixed(2)}ì•¼ë“œ`,yard*p+install);
}

function addBlack(){
 let w=+w2.value,p=+p2.value;
 let f=Math.min(6,Math.max(2,Math.ceil(w/1000)));
 let install=f>=4?90000:80000;
 add(2,`ì•”ë§‰ ${f}í­`,f*p+install);
}

function addWave(){
 let w=+w3.value,p=+p3.value;
 let f=b3.value==="casa"?((w+200)*2)/1500:(w*2.2)/900;
 if(b3.value==="casa") f=(f%1)>0.29?Math.ceil(f):Math.floor(f);
 let install=f>=4?90000:80000;
 add(3,`ë‚˜ë¹„ ${f}í­`,f*p+install);
}

function resetAll(){
 if(confirm("ì „ì²´ ì´ˆê¸°í™”?")){
  localStorage.clear();
  location.reload();
 }
}

window.onload=load;
</script>
</body>
</html>
