<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>커튼 계산기</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,Apple SD Gothic Neo,sans-serif;
  background:#f4f4f7;
  margin:0;
  padding:16px;
  font-size:18px;
}
h1{text-align:center;font-size:1.6rem}
.calculator{
  background:#fff;
  border-radius:16px;
  padding:18px;
  margin-bottom:20px;
  box-shadow:0 4px 10px rgba(0,0,0,.1)
}
input,select,button{
  width:100%;
  padding:14px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-top:10px;
}
button{
  background:#4f46e5;
  color:#fff;
  font-weight:800;
  border:none;
}
.item{
  background:#fafafa;
  border:1px solid #ddd;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
.item button{background:#ef4444}
.total{font-weight:800;text-align:right;margin-top:10px}
#grandTotal{
  position:sticky;
  bottom:10px;
  background:#fff;
  padding:18px;
  font-size:1.4rem;
  font-weight:900;
  border-radius:16px;
}
#resetAll{
  background:#ef4444;
  font-size:1.2rem;
}
</style>
</head>

<body>
<h1>커튼·블라인드 계산기</h1>

<div class="calculator">
<h3>1. 속지 커튼</h3>
<input id="w1" type="number" placeholder="가로(mm)">
<input id="p1" type="number" placeholder="야드당 가격">
<button onclick="addSheer()">추가</button>
<div id="l1"></div>
<div class="total" id="t1">0원</div>
</div>

<div class="calculator">
<h3>5. 전동 레일</h3>
<select id="m5">
<option value="180000">조절전동300 (180,000)</option>
<option value="190000">조절레일450 (190,000)</option>
<option value="220000">조절레일520 (220,000)</option>
<option value="210000">제작전동300 (210,000)</option>
<option value="220000">제작전동400 (220,000)</option>
<option value="230000">제작전동500 (230,000)</option>
</select>
<button onclick="addMotor()">추가</button>
<div id="l5"></div>
<div class="total" id="t5">0원</div>
</div>

<div id="grandTotal">전체: 0원</div>
<button id="resetAll" onclick="resetAll()">전체 삭제</button>

<script>
let sum=[0,0,0,0,0,0];
const LIMIT=600000;

function money(n){return n.toLocaleString()+"원"}

function save(){
  localStorage.setItem("calc",JSON.stringify({
    sum,
    html:{
      l1:l1.innerHTML,
      l5:l5.innerHTML
    },
    last:Date.now()
  }));
}

function load(){
  const d=JSON.parse(localStorage.getItem("calc"));
  if(!d) return;
  if(Date.now()-d.last>LIMIT){ resetAll(); return; }
  sum=d.sum;
  l1.innerHTML=d.html.l1;
  l5.innerHTML=d.html.l5;
  update();
}

function update(){
  t1.innerText=money(sum[1]);
  t5.innerText=money(sum[5]);
  grandTotal.innerText="전체: "+money(sum.reduce((a,b)=>a+b,0));
  save();
}

function add(i,text,val){
  val=Math.round(val);
  const d=document.createElement("div");
  d.className="item";
  d.innerHTML=`${text} / ${money(val)}
    <button onclick="this.parentElement.remove();sum[${i}]-=${val};update()">삭제</button>`;
  document.getElementById("l"+i).appendChild(d);
  sum[i]+=val;
  update();
}

function addSheer(){
  let w=+w1.value,p=+p1.value;
  let y=((w+200)*2)/900;
  let ins=w>4800?90000:80000;
  add(1,`속지 ${y.toFixed(2)}야드`,y*p+ins);
}

function addMotor(){
  add(5,"전동 레일",+m5.value);
}

function resetAll(){
  sum=[0,0,0,0,0,0];
  l1.innerHTML=l5.innerHTML="";
  update();
  localStorage.removeItem("calc");
}

load();
</script>
</body>
</html>
